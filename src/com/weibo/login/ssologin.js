function SSOController(){var undefined,me=this,updateCookieTimer=null,updateCookieTimeHardLimit=1800,cookieExpireTimeLength=3600*24,crossDomainForward=null,crossDomainTimer=null,crossDomainTime=3,autoLoginCallBack2=null,ssoCrosssDomainUrl="http://login.sina.com.cn/sso/crossdomain.php",ssoLoginUrl="http://login.sina.com.cn/sso/login.php",ssoLogoutUrl="http://login.sina.com.cn/sso/logout.php",ssoUpdateCookieUrl="http://login.sina.com.cn/sso/updatetgt.php",ssoPreLoginUrl="http://login.sina.com.cn/sso/prelogin.php",pincodeUrl="http://login.sina.com.cn/cgi/pin.php",vfValidUrl="http://weibo.com/sguide/vdun.php",generateVisitorUrl="http://passport.weibo.com/visitor/visitor",crossDomainUrlList=null,loginMethod="",ssoServerTimeTimer=null,ssoLoginTimer=null,loginByConfig=null,loginMethodCheck=null,https=1,rsa=2,wsse=4,pcid="",tmpData={},preloginTimeStart=0,preloginTime=0,callbackLogoutStatus;this.https=1;this.rsa=2;this.wsse=4;this.name="sinaSSOController";this.loginFormId="ssoLoginForm";this.scriptId="ssoLoginScript";this.ssoCrossDomainScriptId="ssoCrossDomainScriptId";this.loginFrameName="ssoLoginFrame";this.appLoginURL={"51uc.com":"http://passport.51uc.com/sso/login.php","weibo.com":"http://weibo.com/sso/login.php"};this.appDomainService={"51uc.com":"51uc","weibo.com":"miniblog"};this.loginExtraQuery={};this.setDomain=false;this.feedBackUrl="";this.service="sso";this.domain="sina.com.cn";this.from="";this.pageCharset="GB2312";this.useTicket=false;this.isCheckLoginState=false;this.isUpdateCookieOnLoad=true;this.useIframe=true;this.noActiveTime=7200;this.autoUpdateCookieTime=1800;this.loginType=rsa;this.timeoutEnable=false;this.loginTimeout=5000;this.crossDomain=true;this.scriptLoginHttps=false;this.allowAutoFoundServerTime=false;this.allowAutoFoundServerTimeError=true;this.calcServerTimeInterval=2000;this.servertime=null;this.nonce=null;this.rsaPubkey=null;this.rsakv=null;this.loginExtraFlag={};this.cdult=false;this.crossDomainTime=5;this.failRedirect=false;this.isGenerateVisitor=true;this.generateVisitorProbability=1;this.generateVisitorDelay=6;this.generateVisitorDomain=["^.*sina.com.cn$"];this.getVersion=function(){return"ssologin.js(v1.4.14) 2013-12-18";};this.getEntry=function(){return me.entry;};this.getClientType=function(){return me.getVersion().split(" ")[0];};this.init=function(){if(getType(arguments[0])==="object"){return customPrepare(arguments[0]);}me.setLoginType(me.loginType);var _=window.sinaSSOConfig;if(typeof _!="object"){_={};}var $;for($ in _){me[$]=_[$];}if(!me.entry){me.entry=me.service;}if(me.isUpdateCookieOnLoad){setTimeout(me.name+".updateCookie()",10000);}if(me.isGenerateVisitor){if(self===top&&Math.random()<me.generateVisitorProbability&&location.protocol!=="https:"){setTimeout(me.name+".generateVisitor()",me.generateVisitorDelay*1000);}}if(me.isCheckLoginState){addEventListener(window,"load",function(){me.checkLoginState();});}if(me.allowAutoFoundServerTime&&ssoLoginServerTime){me.setServerTime(ssoLoginServerTime);}me.customInit();};this.getLoginInfo=function(){var $=getCookie("sso_info");if(!$){return{};}return parse_str(sinaSSOEncoder.Cookie.decode($));};this.customInit=function(){};this.customUpdateCookieCallBack=function($){};this.customLoginCallBack=function($){};this.customLogoutCallBack=function($){me.customLoginCallBack({result:false});};var customLogin,customPrepare,customLogout;(function(){var B=function(){},_={username:"",password:"",savestate:0,vsnf:0,vsnval:"",door:"",setCookie:1,ssoSimpleLogin:0,onComplete:B,onSuccess:B,onFailure:B},F={onComplete:B,onSuccess:B,onFailure:B},$={vsnf:"vsnf",vsnval:"vsnval",door:"door",setCookie:"s",ssoSimpleLogin:"ssosimplelogin"},D={},C={},A=function(A,$){var B,_={};A=A||{};$=$||{};objMerge(_,A);for(B in $){if(A.hasOwnProperty(B)){_[B]=$[B];}}return _;},E=function(A,_,$){if(typeof(A[_])==="function"){A[_]($);}};this.callbackLoginStatus=function($){me.customLoginCallBack($);E(D,"onComplete",$);if($&&$.result===true){E(D,"onSuccess",$);}else{E(D,"onFailure",$);}};callbackLogoutStatus=function($){me.customLogoutCallBack($);E(C,"onComplete",$);if($&&$.result===true){E(C,"onSuccess",$);}else{E(C,"onFailure",$);}};customPrepare=function(B){var C;B=B||{};D=objMerge({entry:"sso",useTicket:false,service:"sso",domain:"sina.com.cn",feedBackUrl:"",setDomain:false,crossDomain:true,name:"sinaSSOController"},_);D=A(D,B);window[D.name]=window[D.name]||me;for(C in D){if(!_.hasOwnProperty(C)){me[C]=D[C];}}me.loginExtraQuery={};objMerge(me.loginExtraQuery,D.loginExtraQuery);for(C in $){if(D.hasOwnProperty(C)){me.loginExtraQuery[$[C]]=D[C];}}};customLogin=function($){$=$||{};customPrepare($);me.login(D.username,D.password,D.savestate);};customLogout=function($){$=$||{};C=objMerge({},F);C=A(C,$);me.logout();};}).apply(this);this.login=function($,_,A){if(getType(arguments[0])==="object"){return customLogin(arguments[0]);}if(!ssoLoginTimer){ssoLoginTimer=new prototypeTimer(me.timeoutEnable);}else{ssoLoginTimer.clear();}ssoLoginTimer.start(me.loginTimeout,function(){ssoLoginTimer.clear();me.callbackLoginStatus({result:false,errno:-1,reason:unescape("%u767B%u5F55%u8D85%u65F6%uFF0C%u8BF7%u91CD%u8BD5")});});A=A==undefined?0:A;tmpData.savestate=A;loginByConfig=function(){if(!me.feedBackUrl&&loginByXMLHttpRequest($,_,A)){return true;}if(me.useIframe&&(me.setDomain||me.feedBackUrl)){if(me.setDomain){document.domain=me.domain;if(!me.feedBackUrl&&me.domain!="sina.com.cn"){me.feedBackUrl=makeURL(me.appLoginURL[me.domain],{domain:1});}}loginMethod="post";var B=loginByIframe($,_,A);if(!B){loginMethod="get";if(me.scriptLoginHttps){me.setLoginType(me.loginType|https);}else{me.setLoginType(me.loginType|rsa);}loginByScript($,_,A);}}else{loginMethod="get";loginByScript($,_,A);}me.nonce=null;};loginMethodCheck=function(){if((me.loginType&wsse)||(me.loginType&rsa)){if(me.servertime){if(!me.nonce){me.nonce=makeNonce(6);}loginByConfig();return true;}me.getServerTime($,loginByConfig);}else{loginByConfig();}};loginMethodCheck();return true;};this.prelogin=function(B,A){var C=location.protocol=="https:"?ssoPreLoginUrl.replace(/^http:/,"https:"):ssoPreLoginUrl,$=B.username||"";$=sinaSSOEncoder.base64.encode(urlencode($));delete B.username;var _={entry:me.entry,callback:me.name+".preloginCallBack",su:$,rsakt:"mod"};C=makeURL(C,objMerge(_,B));me.preloginCallBack=function($){if($&&$.retcode==0){me.setServerTime($.servertime);me.nonce=$.nonce;me.rsaPubkey=$.pubkey;me.rsakv=$.rsakv;pcid=$.pcid;preloginTime=(new Date()).getTime()-preloginTimeStart-(parseInt($.exectime,10)||0);}if(typeof A=="function"){A($);}};preloginTimeStart=(new Date()).getTime();excuteScript(me.scriptId,C);};this.getServerTime=function($,_){if(me.servertime){if(typeof _=="function"){_({retcode:0,servertime:me.servertime});}return true;}me.prelogin({username:$},_);};this.logout=function(){try{if(getType(arguments[0])==="object"){return customLogout(arguments[0]);}var _={entry:me.getEntry(),callback:me.name+".ssoLogoutCallBack"};try{_.sr=window.screen.width+"*"+window.screen.height;}catch($){}var A=location.protocol=="https:"?ssoLogoutUrl.replace(/^http:/,"https:"):ssoLogoutUrl;A=makeURL(A,_);excuteScript(me.scriptId,A);}catch($){}return true;};this.ssoLogoutCallBack=function($){if($.arrURL){me.setCrossDomainUrlList($);}me.crossDomainAction("logout",function(){callbackLogoutStatus({result:true});});};this.updateCookie=function(){try{if(me.autoUpdateCookieTime>5){if(updateCookieTimer!=null){clearTimeout(updateCookieTimer);}updateCookieTimer=setTimeout(me.name+".updateCookie()",me.autoUpdateCookieTime*1000);}var B=me.getCookieExpireTime(),A=(new Date()).getTime()/1000,$={};if(B==null){$={retcode:6102};}else{if(B<A){$={retcode:6203};}else{if(B-cookieExpireTimeLength+updateCookieTimeHardLimit>A){$={retcode:6110};}else{if(B-A>me.noActiveTime){$={retcode:6111};}}}}if($.retcode!==undefined){me.customUpdateCookieCallBack($);return false;}var C=location.protocol=="https:"?ssoUpdateCookieUrl.replace(/^http:/,"https:"):ssoUpdateCookieUrl;C=makeURL(C,{entry:me.getEntry(),callback:me.name+".updateCookieCallBack"});excuteScript(me.scriptId,C);}catch(_){}return true;};this.setCrossDomainUrlList=function($){crossDomainUrlList=$;};this.checkAltLoginName=function(){return true;};this.callFeedBackUrl=function(_){try{var A={callback:me.name+".feedBackUrlCallBack"};if(_.ticket){A.ticket=_.ticket;}if(_.retcode!==undefined){A.retcode=_.retcode;}var B=makeURL(me.feedBackUrl,A);excuteScript(me.scriptId,B);}catch($){}return true;};this.loginCallBack=function(_){try{if(me.timeoutEnable&&!ssoLoginTimer.isset()){return;}ssoLoginTimer.clear();me.loginExtraFlag={};var C={},D=_.ticket,$=_.uid;if($){C.result=true;C.retcode=0;C.userinfo={uniqueid:_.uid};if(D){C.ticket=D;}if(_.cookie){C.cookie=_.cookie;}if(me.feedBackUrl){if(me.crossDomain){me.crossDomainAction("login",function(){me.callFeedBackUrl(C);});}else{me.callFeedBackUrl(C);}}else{if(me.crossDomain){if(_.crossDomainUrlList){me.setCrossDomainUrlList({retcode:0,arrURL:_.crossDomainUrlList});}me.crossDomainAction("login",function(){if(D&&me.appLoginURL[me.domain]){me.appLogin(D,me.domain,me.name+".callbackLoginStatus");}else{C.userinfo=objMerge(C.userinfo,me.getSinaCookie());me.callbackLoginStatus(C);}});}else{me.callbackLoginStatus(C);}}}else{if(loginMethodCheck&&_.retcode=="2092"&&me.allowAutoFoundServerTimeError){me.setServerTime(0);me.loginExtraFlag=objMerge(me.loginExtraFlag,{wsseretry:"servertime_error"});loginMethodCheck();loginMethodCheck=null;return false;}C.result=false;C.errno=_.retcode;if(C.errno=="4069"){var B=_.reason.split("|");C.reason=B[0];if(B.length==2){C.rurl=B[1];}if(C.rurl){try{top.location.href=C.rurl;return;}catch(A){}}}else{C.reason=_.reason;}me.callbackLoginStatus(C);}}catch(A){}return true;};this.updateCookieCallBack=function($){if($.retcode==0){me.crossDomainAction("update",function(){me.customUpdateCookieCallBack($);});}else{me.customUpdateCookieCallBack($);}};this.feedBackUrlCallBack=function($){if(loginMethod=="post"&&me.timeoutEnable&&!ssoLoginTimer.isset()){return;}ssoLoginTimer.clear();if($.errno=="2092"){me.setServerTime(0);}if($.errno=="4069"){var A=$.reason.split("|");$.reason=A[0];if(A.length==2){$.rurl=A[1];try{top.location.href=$.rurl;return;}catch(_){}}}me.callbackLoginStatus($);removeNode(me.loginFrameName);};this.doCrossDomainCallBack=function($){me.crossDomainCounter++;if($){removeNode($.scriptId);}if(me.crossDomainCounter==me.crossDomainCount){clearTimeout(crossDomainTimer);me.crossDomainResult();}};this.crossDomainCallBack=function($){removeNode(me.ssoCrossDomainScriptId);if(!$||$.retcode!=0){return false;}var _=$.arrURL,C,B,A={callback:me.name+".doCrossDomainCallBack"};me.crossDomainCount=_.length;me.crossDomainCounter=0;if(_.length==0){clearTimeout(crossDomainTimer);me.crossDomainResult();return true;}for(var D=0;D<_.length;D++){C=_[D];B="ssoscript"+D;A.scriptId=B;C=makeURL(C,A);if(isSafari()){excuteIframe(B,C);}else{excuteScript(B,C);}}};this.crossDomainResult=function(){crossDomainUrlList=null;if(typeof crossDomainForward=="function"){crossDomainForward();}};this.crossDomainAction=function(B,A){crossDomainTimer=setTimeout(me.name+".crossDomainResult()",crossDomainTime*1000);if(typeof A=="function"){crossDomainForward=A;}else{crossDomainForward=null;}if(crossDomainUrlList){me.crossDomainCallBack(crossDomainUrlList);return false;}var _=me.domain;if(B=="update"){B="login";_="sina.com.cn";}var $={scriptId:me.ssoCrossDomainScriptId,callback:me.name+".crossDomainCallBack",action:B,domain:_,sr:window.screen.width+"*"+window.screen.height},C=makeURL(ssoCrosssDomainUrl,$);excuteScript(me.ssoCrossDomainScriptId,C);};this.checkLoginState=function($){if($){me.autoLogin($);}else{me.autoLogin(function(A){var $={};if(A!==null){var _={displayname:A.nick,uniqueid:A.uid,userid:A.user};$.result=true;$.userinfo=_;}else{$.result=false;$.reason="";}me.callbackLoginStatus($);});}};this.getCookieExpireTime=function(){return getCookieExpireTimeByDomain(me.domain);};this.getSinaCookie=function(A){var _=urldecode(getCookie("SUP"));if(!_&&!urldecode(getCookie("ALF"))){return null;}if(!_){_=urldecode(getCookie("SUR"));}if(!_){return null;}var $=parse_str(_);if(A&&$.et&&($.et*1000<(new Date()).getTime())){return null;}return $;};this.get51UCCookie=function(){return me.getSinaCookie();};this.autoLogin=function($,_){if(me.domain=="sina.com.cn"){if(getCookie("SUP")===null&&getCookie("ALF")!==null){sinaAutoLogin($);return true;}}else{if(getCookie("SUP")===null&&(_||getCookie("SSOLoginState")!==null||getCookie("ALF")!==null)){sinaAutoLogin($);return true;}}$(me.getSinaCookie());return true;};this.autoLoginCallBack2=function($){try{autoLoginCallBack2(me.getSinaCookie());}catch(_){}return true;};this.appLogin=function($,D,C){var F=tmpData.savestate?parseInt((new Date()).getTime()/1000+tmpData.savestate*86400):0,B=getCookie("ALF")?getCookie("ALF"):0,A={callback:C,ticket:$,ssosavestate:F||B},_=me.appLoginURL[D],E=makeURL(_,A);excuteScript(me.scriptId,E,"gb2312");return true;};this.autoLoginCallBack3=function($){if($.retcode!=0){me.autoLoginCallBack2($);return false;}var _=me.domain=="sina.com.cn"?"weibo.com":me.domain;me.appLogin($.ticket,_,me.name+".autoLoginCallBack2");return true;};this.setLoginType=function(_){var $=location.protocol=="https:"?me.https:0;if($){me.crossDomain=false;}me.loginType=_|$;return true;};this.setServerTime=function(_){if(!ssoServerTimeTimer){ssoServerTimeTimer=new prototypeTimer(true);}if(_==0){ssoServerTimeTimer.clear();me.servertime=_;return true;}if(_<1294935546){return false;}var $=function(){if(me.servertime){me.servertime+=me.calcServerTimeInterval/1000;ssoServerTimeTimer.start(me.calcServerTimeInterval,$);}};me.servertime=_;ssoServerTimeTimer.start(me.calcServerTimeInterval,$);};this.getPinCodeUrl=function(_){if(_==undefined){_=0;}if(pcid){me.loginExtraQuery.pcid=pcid;}var $=location.protocol=="https:"?pincodeUrl.replace(/^http:/,"https:"):pincodeUrl;return $+"?r="+Math.floor(Math.random()*100000000)+"&s="+_+(pcid.length>0?"&p="+pcid:"");};this.showPinCode=function($){me.$($).src=me.getPinCodeUrl();};this.isVfValid=function(){return me.getSinaCookie(true).vf!=1;};this.getVfValidUrl=function(){return vfValidUrl;};this.enableFailRedirect=function(){me.failRedirect=true;};var makeNonce=function(_){var B="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",$="";for(var A=0;A<_;A++){$+=B.charAt(Math.ceil(Math.random()*1000000)%B.length);}return $;},sinaAutoLogin=function(_){autoLoginCallBack2=_;var $={entry:me.getEntry(),service:me.service,encoding:"UTF-8",gateway:1,returntype:"TEXT",from:me.from};if(me.domain=="sina.com.cn"){$.callback=me.name+".autoLoginCallBack3";$.service="miniblog";$.useticket=1;}else{$.callback=me.name+".autoLoginCallBack3";$.useticket=1;}var A=location.protocol=="https:"?ssoLoginUrl.replace(/^http:/,"https:"):ssoLoginUrl;A=makeURL(A,$);excuteScript(me.scriptId,A,"gb2312");return true;},getCookieExpireTimeByDomain=function(A){var _=null,$=null;$=me.getSinaCookie();if($){_=$.et;}return _;},addEventListener=function($,_,A){if($.addEventListener){$.addEventListener(_,A,false);}else{if($.attachEvent){$.attachEvent("on"+_,A);}else{$["on"+_]=A;}}},prototypeTimer=function($){var _=false;this.start=function(B,A){if($){_=setTimeout(A,B);}};this.clear=function(A){if($){clearTimeout(_);_=false;}};this.isset=function(){return _!==false;};},excuteScript=function($,B,A){removeNode($);var C=document.getElementsByTagName("head")[0],_=document.createElement("script");_.charset=A||"gb2312";_.id=$;_.type="text/javascript";_.src=makeURL(B,{client:me.getClientType(),_:(new Date()).getTime()});C.appendChild(_);},excuteIframe=function($,B){removeNode($);var A=document.getElementsByTagName("body")[0],_=document.createElement("iframe");_.style.display="none";_.src=makeURL(B,{client:me.getClientType(),_:(new Date()).getTime()});_.isReady=false;addEventListener(_,"load",function(){if(_.isReady){return;}_.isReady=true;me.doCrossDomainCallBack({scriptId:$});});A.appendChild(_);},makeRequest=function($,C,D){var A={entry:me.getEntry(),gateway:1,from:me.from,savestate:D,useticket:me.useTicket?1:0};if(me.failRedirect){me.loginExtraQuery.frd=1;}A=objMerge(A,{pagerefer:document.referrer||""});A=objMerge(A,me.loginExtraFlag);A=objMerge(A,me.loginExtraQuery);A.su=sinaSSOEncoder.base64.encode(urlencode($));if(me.service){A.service=me.service;}if((me.loginType&rsa)&&me.servertime&&sinaSSOEncoder&&sinaSSOEncoder.RSAKey){A.servertime=me.servertime;A.nonce=me.nonce;A.pwencode="rsa2";A.rsakv=me.rsakv;var B=new sinaSSOEncoder.RSAKey();B.setPublic(me.rsaPubkey,"10001");C=B.encrypt([me.servertime,me.nonce].join("\t")+"\n"+C);}else{if((me.loginType&wsse)&&me.servertime&&sinaSSOEncoder&&sinaSSOEncoder.hex_sha1){A.servertime=me.servertime;A.nonce=me.nonce;A.pwencode="wsse";C=sinaSSOEncoder.hex_sha1(""+sinaSSOEncoder.hex_sha1(sinaSSOEncoder.hex_sha1(C))+me.servertime+me.nonce);}}A.sp=C;try{A.sr=window.screen.width+"*"+window.screen.height;}catch(_){}return A;},loginByXMLHttpRequest=function($,C,E){if(typeof XMLHttpRequest=="undefined"){return false;}var B=new XMLHttpRequest();if(!"withCredentials"in B){return false;}var A=makeXMLRequestQuery($,C,E),D=(me.loginType&https)?ssoLoginUrl.replace(/^http:/,"https:"):ssoLoginUrl;D=makeURL(D,{client:me.getClientType(),_:(new Date()).getTime()});try{B.open("POST",D,true);B.setRequestHeader("Content-Type","application/x-www-form-urlencoded");B.withCredentials=true;B.onreadystatechange=function(){if(B.readyState==4&&B.status==200){me.loginCallBack(parseJSON(B.responseText));}};B.send(httpBuildQuery(A));}catch(_){return false;}return true;},makeXMLRequestQuery=function($,B,C){if(me.appLoginURL[me.domain]){me.useTicket=1;me.service=me.appDomainService[me.domain]||me.service;}var A=0;if(me.domain){A=2;}if(!me.appLoginURL[me.domain]){A=3;}if(me.cdult!==false){A=me.cdult;}if(A==3){crossDomainTime=me.crossDomainTime;delete me.appLoginURL[me.domain];}var _=makeRequest($,B,C);return objMerge(_,{encoding:"UTF-8",cdult:A,domain:me.domain,useticket:me.appLoginURL[me.domain]?1:0,prelt:preloginTime,returntype:"TEXT"});},loginByScript=function($,A,C){var _=makeXMLRequestQuery($,A,C);_=objMerge(_,{callback:me.name+".loginCallBack"});var B=(me.loginType&https)?ssoLoginUrl.replace(/^http:/,"https:"):ssoLoginUrl;B=makeURL(B,_);excuteScript(me.scriptId,B,"gb2312");},loginByIframe=function(A,F,H){createIFrame(me.loginFrameName);var _=createForm(me.loginFormId),D=makeRequest(A,F,H);D.encoding="UTF-8";if(me.crossDomain==false){D.crossdomain=0;}D.prelt=preloginTime;if(me.feedBackUrl){D.url=makeURL(me.feedBackUrl,{framelogin:1,callback:"parent."+me.name+".feedBackUrlCallBack"});D.returntype="META";}else{D.callback="parent."+me.name+".loginCallBack";D.returntype="IFRAME";D.setdomain=me.setDomain?1:0;}for(var G in me.loginExtraQuery){if(typeof me.loginExtraQuery[G]=="function"){continue;}D[G]=me.loginExtraQuery[G];}for(var C in D){_.addInput(C,D[C]);}var E=(me.loginType&https)?ssoLoginUrl.replace(/^http:/,"https:"):ssoLoginUrl;E=makeURL(E,objMerge({client:me.getClientType()},me.loginExtraFlag));_.method="post";_.action=E;_.target=me.loginFrameName;var $=true;try{_.submit();}catch(B){removeNode(me.loginFrameName);$=false;}setTimeout(function(){removeNode(_);},10);return $;},createIFrame=function(_,A){if(A==null){A="javascript:false;";}removeNode(_);var $=document.createElement("iframe");$.height=0;$.width=0;$.style.display="none";$.name=_;$.id=_;$.src=A;appendChild(document.body,$);window.frames[_].name=_;return $;},createForm=function(_,A){if(A==null){A="none";}removeNode(_);var $=document.createElement("form");$.height=0;$.width=0;$.style.display=A;$.name=_;$.id=_;appendChild(document.body,$);document.forms[_].name=_;$.addInput=function($,_,B){if(B==null){B="text";}var A=this.getElementsByTagName("input")[$];if(A){this.removeChild(A);}A=document.createElement("input");this.appendChild(A);A.id=$;A.name=$;A.type=B;A.value=_;};return $;},removeNode=function(_){try{if(typeof(_)==="string"){_=me.$(_);}_.parentNode.removeChild(_);}catch($){}},getType=function($){if(typeof($)==="undefined"){return"undefined";}if($===null){return"null";}return Object.prototype.toString.call($).replace(/^\[object\s|\]$/gi,"").toLowerCase();},isSafari=function(){var $=navigator.userAgent.toLowerCase();return((/webkit/i).test($)&&!(/chrome/i).test($));},appendChild=function(_,$){_.appendChild($);},getCookie=function($){var _=(new RegExp($+"=([^;]+)")).exec(document.cookie);return _==null?null:_[1];},makeURL=function(_,$){return _+urlAndChar(_)+httpBuildQuery($);},urlAndChar=function($){return(/\?/.test($)?"&":"?");},urlencode=function($){return encodeURIComponent($);},urldecode=function(_){if(_==null){return"";}else{try{return decodeURIComponent(_);}catch($){return"";}}},httpBuildQuery=function(_){if(typeof _!="object"){return"";}var $=new Array();for(var A in _){if(typeof _[A]=="function"){continue;}$.push(A+"="+urlencode(_[A]));}return $.join("&");},parse_str=function(_){var A=_.split("&"),$,B={};for(var C=0;C<A.length;C++){$=A[C].split("=");B[$[0]]=urldecode($[1]);}return B;},parseJSON=function(str){if(typeof(str)==="object"){return str;}else{if(window.JSON){return JSON.parse(str);}else{return eval("("+str+")");}}},objMerge=function($,A){for(var _ in A){$[_]=A[_];}return $;};this.$=function($){return document.getElementById($);};this.generateVisitor=function(){var A,$=false;for(var B=0;B<this.generateVisitorDomain.length;B++){A=new RegExp(this.generateVisitorDomain[B]);if(A.test(document.domain)){$=true;break;}}if(!$){return false;}try{if(me.shouldGenerateVisitor()&&!me.$("visitorfrm84747h4784")){document.body.insertAdjacentHTML("beforeEnd","<iframe id='visitorfrm84747h4784' style='position:absolute;left:0;top:0;border:none;width:1px;height:1px' src='"+generateVisitorUrl+"'/>");setTimeout(function(){try{var _=me.$("visitorfrm84747h4784");if(_){_.parentNode.removeChild(_);}}catch($){}},1000*30);}}catch(_){return false;}return true;};this.shouldGenerateVisitor=function(){var $=false,A=false,_=getCookie("SUBP");if(_){$=true;}var B=getCookie("SUP");if(B){A=true;}if(!$&&!A){return true;}return false;};}var sinaSSOEncoder=sinaSSOEncoder||{};(function(){var A=0,B=8;this.hex_sha1=function(_){return $(G(F(_),_.length*B));};var G=function(R,H){R[H>>5]|=128<<(24-H%32);R[((H+64>>9)<<4)+15]=H;var K=Array(80),G=1732584193,B=-271733879,F=-1732584194,$=271733878,A=-1009589776;for(var J=0;J<R.length;J+=16){var Q=G,P=B,O=F,M=$,L=A;for(var I=0;I<80;I++){if(I<16){K[I]=R[J+I];}else{K[I]=C(K[I-3]^K[I-8]^K[I-14]^K[I-16],1);}var N=_(_(C(G,5),E(I,B,F,$)),_(_(A,K[I]),D(I)));A=$;$=F;F=C(B,30);B=G;G=N;}G=_(G,Q);B=_(B,P);F=_(F,O);$=_($,M);A=_(A,L);}return Array(G,B,F,$,A);},E=function(_,A,B,$){if(_<20){return(A&B)|((~A)&$);}if(_<40){return A^B^$;}if(_<60){return(A&B)|(A&$)|(B&$);}return A^B^$;},D=function($){return($<20)?1518500249:($<40)?1859775393:($<60)?-1894007588:-899497514;},_=function(B,A){var $=(B&65535)+(A&65535),_=(B>>16)+(A>>16)+($>>16);return(_<<16)|($&65535);},C=function($,_){return($<<_)|($>>>(32-_));},F=function($){var A=Array(),_=(1<<B)-1;for(var C=0;C<$.length*B;C+=B){A[C>>5]|=($.charCodeAt(C/B)&_)<<(24-C%32);}return A;},$=function(B){var _=A?"0123456789ABCDEF":"0123456789abcdef",$="";for(var C=0;C<B.length*4;C++){$+=_.charAt((B[C>>2]>>((3-C%4)*8+4))&15)+_.charAt((B[C>>2]>>((3-C%4)*8))&15);}return $;};this.base64={encode:function($){$=""+$;if($==""){return"";}var E="",D,F,G="",C,A,_,B="",H=0;do{D=$.charCodeAt(H++);F=$.charCodeAt(H++);G=$.charCodeAt(H++);C=D>>2;A=((D&3)<<4)|(F>>4);_=((F&15)<<2)|(G>>6);B=G&63;if(isNaN(F)){_=B=64;}else{if(isNaN(G)){B=64;}}E=E+this._keys.charAt(C)+this._keys.charAt(A)+this._keys.charAt(_)+this._keys.charAt(B);D=F=G="";C=A=_=B="";}while(H<$.length);return E;},decode:function(J,L,I){var E=function($,_){for(var A=0;A<$.length;A++){if($[A]===_){return A;}}return-1;};if(typeof(J)=="string"){J=J.split("");}var B=[],M,N,O="",D,A,$,C="";if(J.length%4!=0){}var G=/[^A-Za-z0-9\+\/\=]/g,_=this._keys.split("");if(L=="urlsafe"){G=/[^A-Za-z0-9\-_\=]/g;_=this._keys_urlsafe.split("");}var H=0;if(L=="binnary"){_=[];for(H=0;H<=64;H++){_[H]=H+128;}}if(L!="binnary"&&G.exec(J.join(""))){return I=="array"?[]:"";}H=0;do{D=E(_,J[H++]);A=E(_,J[H++]);$=E(_,J[H++]);C=E(_,J[H++]);M=(D<<2)|(A>>4);N=((A&15)<<4)|($>>2);O=(($&3)<<6)|C;B.push(M);if($!=64&&$!=-1){B.push(N);}if(C!=64&&C!=-1){B.push(O);}M=N=O="";D=A=$=C="";}while(H<J.length);if(I=="array"){return B;}var K="",F=0;for(;F<B.lenth;F++){K+=String.fromCharCode(B[F]);}return K;},_keys:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",_keys_urlsafe:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_="};this.Cookie={decode:function(_){var B=function($){var A="",_=0;for(;_<$.length;_++){A+="%"+C($[_]);}return decodeURIComponent(A);},C=function(_){var $="0"+_.toString(16);return $.length<=2?$:$.substr(1);},A=[],E=_.substr(0,3),$=_.substr(3);switch(E){case"v01":for(var D=0;D<$.length;D+=2){A.push(parseInt($.substr(D,2),16));}return decodeURIComponent(B(sinaSSOEncoder.base64.decode(A,"binnary","array")));break;case"v02":A=sinaSSOEncoder.base64.decode($,"urlsafe","array");return B(sinaSSOEncoder.base64.decode(A,"binnary","array"));break;default:return decodeURIComponent(_);}}};}).call(sinaSSOEncoder);(function(){var i,F=0xdeadbeefcafe,G=((F&16777215)==15715070);function R(A,$,_){if(A!=null){if("number"==typeof A){this.fromNumber(A,$,_);}else{if($==null&&"string"!=typeof A){this.fromString(A,256);}else{this.fromString(A,$);}}}}function F0(){return new R(null);}function M0(E,D,$,C,A,B){while(--B>=0){var _=D*this[E++]+$[C]+A;A=Math.floor(_/67108864);$[C++]=_&67108863;}return A;}function P0(I,H,$,F,A,C){var B=H&32767,_=H>>15;while(--C>=0){var D=this[I]&32767,G=this[I++]>>15,E=_*D+G*B;D=B*D+((E&32767)<<15)+$[F]+(A&1073741823);A=(D>>>30)+(E>>>15)+_*G+(A>>>30);$[F++]=D&1073741823;}return A;}function O0(I,H,$,F,A,C){var B=H&16383,_=H>>14;while(--C>=0){var D=this[I]&16383,G=this[I++]>>14,E=_*D+G*B;D=B*D+((E&16383)<<14)+$[F]+A;A=(D>>28)+(E>>14)+_*G;$[F++]=D&268435455;}return A;}if(G&&(navigator.appName=="Microsoft Internet Explorer")){R.prototype.am=P0;i=30;}else{if(G&&(navigator.appName!="Netscape")){R.prototype.am=M0;i=26;}else{R.prototype.am=O0;i=28;}}R.prototype.DB=i;R.prototype.DM=((1<<i)-1);R.prototype.DV=(1<<i);var w=52;R.prototype.FV=Math.pow(2,w);R.prototype.F1=w-i;R.prototype.F2=2*i-w;var I0="0123456789abcdefghijklmnopqrstuvwxyz",_0=new Array(),a,T;a="0".charCodeAt(0);for(T=0;T<=9;++T){_0[a++]=T;}a="a".charCodeAt(0);for(T=10;T<36;++T){_0[a++]=T;}a="A".charCodeAt(0);for(T=10;T<36;++T){_0[a++]=T;}function u($){return I0.charAt($);}function y($,A){var _=_0[$.charCodeAt(A)];return(_==null)?-1:_;}function L0($){for(var _=this.t-1;_>=0;--_){$[_]=this[_];}$.t=this.t;$.s=this.s;}function m($){this.t=1;this.s=($<0)?-1:0;if($>0){this[0]=$;}else{if($<-1){this[0]=$+DV;}else{this.t=0;}}}function P(_){var $=F0();$.fromInt(_);return $;}function B(_,$){var B;if($==16){B=4;}else{if($==8){B=3;}else{if($==256){B=8;}else{if($==2){B=1;}else{if($==32){B=5;}else{if($==4){B=2;}else{this.fromRadix(_,$);return;}}}}}}this.t=0;this.s=0;var E=_.length,C=false,A=0;while(--E>=0){var D=(B==8)?_[E]&255:y(_,E);if(D<0){if(_.charAt(E)=="-"){C=true;}continue;}C=false;if(A==0){this[this.t++]=D;}else{if(A+B>this.DB){this[this.t-1]|=(D&((1<<(this.DB-A))-1))<<A;this[this.t++]=(D>>(this.DB-A));}else{this[this.t-1]|=D<<A;}}A+=B;if(A>=this.DB){A-=this.DB;}}if(B==8&&(_[0]&128)!=0){this.s=-1;if(A>0){this[this.t-1]|=((1<<(this.DB-A))-1)<<A;}}this.clamp();if(C){R.ZERO.subTo(this,this);}}function H(){var $=this.s&this.DM;while(this.t>0&&this[this.t-1]==$){--this.t;}}function z(_){if(this.s<0){return"-"+this.negate().toString(_);}var D;if(_==16){D=4;}else{if(_==8){D=3;}else{if(_==2){D=1;}else{if(_==32){D=5;}else{if(_==4){D=2;}else{return this.toRadix(_);}}}}}var E=(1<<D)-1,$,C=false,A="",F=this.t,B=this.DB-(F*this.DB)%D;if(F-->0){if(B<this.DB&&($=this[F]>>B)>0){C=true;A=u($);}while(F>=0){if(B<D){$=(this[F]&((1<<B)-1))<<(D-B);$|=this[--F]>>(B+=this.DB-D);}else{$=(this[F]>>(B-=D))&E;if(B<=0){B+=this.DB;--F;}}if($>0){C=true;}if(C){A+=u($);}}}return C?A:"0";}function L(){var $=F0();R.ZERO.subTo(this,$);return $;}function N0(){return(this.s<0)?this.negate():this;}function s(_){var $=this.s-_.s;if($!=0){return $;}var A=this.t;$=A-_.t;if($!=0){return $;}while(--A>=0){if(($=this[A]-_[A])!=0){return $;}}return 0;}function V(A){var _=1,$;if(($=A>>>16)!=0){A=$;_+=16;}if(($=A>>8)!=0){A=$;_+=8;}if(($=A>>4)!=0){A=$;_+=4;}if(($=A>>2)!=0){A=$;_+=2;}if(($=A>>1)!=0){A=$;_+=1;}return _;}function R0(){if(this.t<=0){return 0;}return this.DB*(this.t-1)+V(this[this.t-1]^(this.s&this.DM));}function J(_,$){var A;for(A=this.t-1;A>=0;--A){$[A+_]=this[A];}for(A=_-1;A>=0;--A){$[A]=0;}$.t=this.t+_;$.s=this.s;}function e(_,$){for(var A=_;A<this.t;++A){$[A-_]=this[A];}$.t=Math.max(this.t-_,0);$.s=this.s;}function C0(C,A){var D=C%this.DB,$=this.DB-D,B=(1<<$)-1,E=Math.floor(C/this.DB),_=(this.s<<D)&this.DM,F;for(F=this.t-1;F>=0;--F){A[F+E+1]=(this[F]>>$)|_;_=(this[F]&B)<<D;}for(F=E-1;F>=0;--F){A[F]=0;}A[E]=_;A.t=this.t+E+1;A.s=this.s;A.clamp();}function d(B,_){_.s=this.s;var D=Math.floor(B/this.DB);if(D>=this.t){_.t=0;return;}var C=B%this.DB,$=this.DB-C,A=(1<<C)-1;_[0]=this[D]>>C;for(var E=D+1;E<this.t;++E){_[E-D-1]|=(this[E]&A)<<$;_[E-D]=this[E]>>C;}if(C>0){_[this.t-D-1]|=(this.s&A)<<$;}_.t=this.t-D;_.clamp();}function E(A,_){var C=0,$=0,B=Math.min(A.t,this.t);while(C<B){$+=this[C]-A[C];_[C++]=$&this.DM;$>>=this.DB;}if(A.t<this.t){$-=A.s;while(C<this.t){$+=this[C];_[C++]=$&this.DM;$>>=this.DB;}$+=this.s;}else{$+=this.s;while(C<A.t){$-=A[C];_[C++]=$&this.DM;$>>=this.DB;}$-=A.s;}_.s=($<0)?-1:0;if($<-1){_[C++]=this.DV+$;}else{if($>0){_[C++]=$;}}_.t=C;_.clamp();}function K(_,$){var C=this.abs(),A=_.abs(),B=C.t;$.t=B+A.t;while(--B>=0){$[B]=0;}for(B=0;B<A.t;++B){$[B+C.t]=C.am(0,A[B],$,B,0,C.t);}$.s=0;$.clamp();if(this.s!=_.s){R.ZERO.subTo($,$);}}function X(_){var B=this.abs(),A=_.t=2*B.t;while(--A>=0){_[A]=0;}for(A=0;A<B.t-1;++A){var $=B.am(A,B[A],_,2*A,0,1);if((_[A+B.t]+=B.am(A+1,2*B[A],_,2*A+1,$,B.t-A-1))>=B.DV){_[A+B.t]-=B.DV;_[A+B.t+1]=1;}}if(_.t>0){_[_.t-1]+=B.am(A,B[A],_,2*A,0,1);}_.s=0;_.clamp();}function W(C,M,K){var O=C.abs();if(O.t<=0){return;}var N=this.abs();if(N.t<O.t){if(M!=null){M.fromInt(0);}if(K!=null){this.copyTo(K);}return;}if(K==null){K=F0();}var Q=F0(),_=this.s,A=C.s,P=this.DB-V(O[O.t-1]);if(P>0){O.lShiftTo(P,Q);N.lShiftTo(P,K);}else{O.copyTo(Q);N.copyTo(K);}var L=Q.t,B=Q[L-1];if(B==0){return;}var J=B*(1<<this.F1)+((L>1)?Q[L-2]>>this.F2:0),G=this.FV/J,H=(1<<this.F1)/J,$=1<<this.F2,F=K.t,D=F-L,I=(M==null)?F0():M;Q.dlShiftTo(D,I);if(K.compareTo(I)>=0){K[K.t++]=1;K.subTo(I,K);}R.ONE.dlShiftTo(L,I);I.subTo(Q,Q);while(Q.t<L){Q[Q.t++]=0;}while(--D>=0){var E=(K[--F]==B)?this.DM:Math.floor(K[F]*G+(K[F-1]+$)*H);if((K[F]+=Q.am(0,E,K,D,0,L))<E){Q.dlShiftTo(D,I);K.subTo(I,K);while(K[F]<--E){K.subTo(I,K);}}}if(M!=null){K.drShiftTo(L,M);if(_!=A){R.ZERO.subTo(M,M);}}K.t=L;K.clamp();if(P>0){K.rShiftTo(P,K);}if(_<0){R.ZERO.subTo(K,K);}}function j(_){var $=F0();this.abs().divRemTo(_,null,$);if(this.s<0&&$.compareTo(R.ZERO)>0){_.subTo($,$);}return $;}function K0($){this.m=$;}function Z($){if($.s<0||$.compareTo(this.m)>=0){return $.mod(this.m);}else{return $;}}function G0($){return $;}function h($){$.divRemTo(this.m,null,$);}function A(A,_,$){A.multiplyTo(_,$);this.reduce($);}function Y(_,$){_.squareTo($);this.reduce($);}K0.prototype.convert=Z;K0.prototype.revert=G0;K0.prototype.reduce=h;K0.prototype.mulTo=A;K0.prototype.sqrTo=Y;function n(){if(this.t<1){return 0;}var _=this[0];if((_&1)==0){return 0;}var $=_&3;$=($*(2-(_&15)*$))&15;$=($*(2-(_&255)*$))&255;$=($*(2-(((_&65535)*$)&65535)))&65535;$=($*(2-_*$%this.DV))%this.DV;return($>0)?this.DV-$:-$;}function B0($){this.m=$;this.mp=$.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<($.DB-15))-1;this.mt2=2*$.t;}function r(_){var $=F0();_.abs().dlShiftTo(this.m.t,$);$.divRemTo(this.m,null,$);if(_.s<0&&$.compareTo(R.ZERO)>0){this.m.subTo($,$);}return $;}function S(_){var $=F0();_.copyTo($);this.reduce($);return $;}function A0(B){while(B.t<=this.mt2){B[B.t++]=0;}for(var A=0;A<this.m.t;++A){var _=B[A]&32767,$=(_*this.mpl+(((_*this.mph+(B[A]>>15)*this.mpl)&this.um)<<15))&B.DM;_=A+this.m.t;B[_]+=this.m.am(0,$,B,A,0,this.m.t);while(B[_]>=B.DV){B[_]-=B.DV;B[++_]++;}}B.clamp();B.drShiftTo(this.m.t,B);if(B.compareTo(this.m)>=0){B.subTo(this.m,B);}}function p(_,$){_.squareTo($);this.reduce($);}function o(A,_,$){A.multiplyTo(_,$);this.reduce($);}B0.prototype.convert=r;B0.prototype.revert=S;B0.prototype.reduce=A0;B0.prototype.mulTo=o;B0.prototype.sqrTo=p;function D(){return((this.t>0)?(this[0]&1):this.s)==0;}function Q(A,D){if(A>4294967295||A<1){return R.ONE;}var B=F0(),C=F0(),$=D.convert(this),E=V(A)-1;$.copyTo(B);while(--E>=0){D.sqrTo(B,C);if((A&(1<<E))>0){D.mulTo(C,$,B);}else{var _=B;B=C;C=_;}}return D.revert(B);}function D0($,_){var A;if($<256||_.isEven()){A=new K0(_);}else{A=new B0(_);}return this.exp($,A);}R.prototype.copyTo=L0;R.prototype.fromInt=m;R.prototype.fromString=B;R.prototype.clamp=H;R.prototype.dlShiftTo=J;R.prototype.drShiftTo=e;R.prototype.lShiftTo=C0;R.prototype.rShiftTo=d;R.prototype.subTo=E;R.prototype.multiplyTo=K;R.prototype.squareTo=X;R.prototype.divRemTo=W;R.prototype.invDigit=n;R.prototype.isEven=D;R.prototype.exp=Q;R.prototype.toString=z;R.prototype.negate=L;R.prototype.abs=N0;R.prototype.compareTo=s;R.prototype.bitLength=R0;R.prototype.mod=j;R.prototype.modPowInt=D0;R.ZERO=P(0);R.ONE=P(1);function t(){this.i=0;this.j=0;this.S=new Array();}function $(A){var B,_,$;for(B=0;B<256;++B){this.S[B]=B;}_=0;for(B=0;B<256;++B){_=(_+this.S[B]+A[B%A.length])&255;$=this.S[B];this.S[B]=this.S[_];this.S[_]=$;}this.i=0;this.j=0;}function g(){var $;this.i=(this.i+1)&255;this.j=(this.j+this.S[this.i])&255;$=this.S[this.i];this.S[this.i]=this.S[this.j];this.S[this.j]=$;return this.S[($+this.S[this.i])&255];}t.prototype.init=$;t.prototype.next=g;function C(){return new t();}var l=256,I,U,q;function b($){U[q++]^=$&255;U[q++]^=($>>8)&255;U[q++]^=($>>16)&255;U[q++]^=($>>24)&255;if(q>=l){q-=l;}}function M(){b(new Date().getTime());}if(U==null){U=new Array();q=0;var H0;if(navigator.appName=="Netscape"&&navigator.appVersion<"5"&&window.crypto&&typeof(window.crypto.random)==="function"){var Q0=window.crypto.random(32);for(H0=0;H0<Q0.length;++H0){U[q++]=Q0.charCodeAt(H0)&255;}}while(q<l){H0=Math.floor(65536*Math.random());U[q++]=H0>>>8;U[q++]=H0&255;}q=0;M();}function O(){if(I==null){M();I=C();I.init(U);for(q=0;q<U.length;++q){U[q]=0;}q=0;}return I.next();}function x($){var _;for(_=0;_<$.length;++_){$[_]=O();}}function k(){}k.prototype.nextBytes=x;function E0($,_){return new R($,_);}function f(_,A){var $="",B=0;while(B+A<_.length){$+=_.substring(B,B+A)+"\n";B+=A;}return $+_.substring(B,_.length);}function c($){if($<16){return"0"+$.toString(16);}else{return $.toString(16);}}function N(_,C){if(C<_.length+11){alert("Message too long for RSA");return null;}var $=new Array(),E=_.length-1;while(E>=0&&C>0){var A=_.charCodeAt(E--);if(A<128){$[--C]=A;}else{if((A>127)&&(A<2048)){$[--C]=(A&63)|128;$[--C]=(A>>6)|192;}else{$[--C]=(A&63)|128;$[--C]=((A>>6)&63)|128;$[--C]=(A>>12)|224;}}}$[--C]=0;var B=new k(),D=new Array();while(C>2){D[0]=0;while(D[0]==0){B.nextBytes(D);}$[--C]=D[0];}$[--C]=2;$[--C]=0;return new R($);}function $0(){this.n=null;this.e=0;this.d=null;this.p=null;this.q=null;this.dmp1=null;this.dmq1=null;this.coeff=null;}function v(_,$){if(_!=null&&$!=null&&_.length>0&&$.length>0){this.n=E0(_,16);this.e=parseInt($,16);}else{alert("Invalid RSA public key");}}function J0($){return $.modPowInt(this.e,this.n);}function _($){var A=N($,(this.n.bitLength()+7)>>3);if(A==null){return null;}var _=this.doPublic(A);if(_==null){return null;}var B=_.toString(16);if((B.length&1)==0){return B;}else{return"0"+B;}}$0.prototype.doPublic=J0;$0.prototype.setPublic=v;$0.prototype.encrypt=_;this.RSAKey=$0;}).call(sinaSSOEncoder);sinaSSOController=new SSOController();sinaSSOController.init();